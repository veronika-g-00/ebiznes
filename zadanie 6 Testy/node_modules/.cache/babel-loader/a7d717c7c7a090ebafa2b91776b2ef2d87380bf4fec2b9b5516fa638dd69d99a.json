{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veron\\\\Desktop\\\\INFORMATYKA STOSOWANA\\\\Semestr II\\\\Ebiznes\\\\zadanie 5 Frontend\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react'; // Dodano useCallback\nimport './App.css';\nimport Produkty from './Produkty';\nimport Platnosci from './Platnosci';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // Stan dla pełnej listy produktów pobranej z serwera\n  const [products, setProducts] = useState([]);\n  // Stan dla produktów w koszyku\n  const [cartItems, setCartItems] = useState([]);\n  // Stan dla błędów ładowania produktów\n  const [loadingError, setLoadingError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true); // Stan ładowania produktów\n\n  // Pobieranie produktów przy starcie aplikacji\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setIsLoading(true); // Rozpocznij ładowanie\n      setLoadingError(null); // Zresetuj błąd\n      try {\n        const response = await fetch('/api/products');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setProducts(data);\n      } catch (error) {\n        console.error(\"Błąd podczas pobierania produktów:\", error);\n        setLoadingError(\"Nie udało się załadować produktów. Czy serwer backendowy działa?\");\n        setProducts([]); // Wyczyść produkty w razie błędu\n      } finally {\n        setIsLoading(false); // Zakończ ładowanie\n      }\n    };\n    fetchProducts();\n  }, []); // Pusta tablica zależności - uruchom tylko raz\n\n  // Funkcja do dodawania produktu do koszyka\n  // useCallback zapobiega tworzeniu nowej funkcji przy każdym renderowaniu App\n  const handleAddToCart = useCallback(productToAdd => {\n    // Sprawdź czy produkt już jest w koszyku\n    setCartItems(prevItems => {\n      const isItemInCart = prevItems.find(item => item.id === productToAdd.id);\n      if (isItemInCart) {\n        // Na razie nic nie robimy jeśli już jest - można by zwiększać ilość\n        return prevItems;\n      } else {\n        // Dodaj nowy produkt do koszyka\n        return [...prevItems, {\n          ...productToAdd\n        }]; // Dodajemy kopię obiektu produktu\n      }\n    });\n  }, []); // Pusta tablica zależności, bo funkcja nie zależy od zmiennego stanu z zewnątrz App\n\n  // Funkcja do usuwania produktu z koszyka\n  const handleRemoveFromCart = useCallback(productIdToRemove => {\n    setCartItems(prevItems => prevItems.filter(item => item.id !== productIdToRemove));\n  }, []); // Pusta tablica zależności\n\n  // Obliczanie sumy cen w koszyku\n  const totalPrice = cartItems.reduce((total, item) => total + item.cena, 0);\n\n  // Komponent do wyświetlania koszyka (prosta wersja)\n  const CartDisplay = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-summary\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Koszyk\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Koszyk jest pusty.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.nazwa, \" - \", item.cena.toFixed(2), \" PLN\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleRemoveFromCart(item.id),\n          style: {\n            marginLeft: '10px'\n          },\n          children: \"Usu\\u0144\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Suma: \", totalPrice.toFixed(2), \" PLN\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"M\\xF3j Sklep\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0141adowanie produkt\\xF3w...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }, this), loadingError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red'\n      },\n      children: [\"B\\u0142\\u0105d: \", loadingError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 24\n    }, this), !isLoading && !loadingError && /*#__PURE__*/_jsxDEV(Produkty, {\n      products: products,\n      cartItems: cartItems // Przekazujemy aktualny koszyk\n      ,\n      onAddToCart: handleAddToCart // Przekazujemy funkcję dodawania\n      ,\n      onRemoveFromCart: handleRemoveFromCart // Przekazujemy funkcję usuwania\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CartDisplay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(Platnosci, {\n      totalPrice: totalPrice // Przekazujemy obliczoną sumę\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"meYcO8QmkP+3XyB4G0XFOCDNmaE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Produkty","Platnosci","jsxDEV","_jsxDEV","App","_s","products","setProducts","cartItems","setCartItems","loadingError","setLoadingError","isLoading","setIsLoading","fetchProducts","response","fetch","ok","Error","status","data","json","error","console","handleAddToCart","productToAdd","prevItems","isItemInCart","find","item","id","handleRemoveFromCart","productIdToRemove","filter","totalPrice","reduce","total","cena","CartDisplay","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","nazwa","toFixed","onClick","style","marginLeft","color","onAddToCart","onRemoveFromCart","_c","$RefreshReg$"],"sources":["C:/Users/veron/Desktop/INFORMATYKA STOSOWANA/Semestr II/Ebiznes/zadanie 5 Frontend/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'; // Dodano useCallback\nimport './App.css';\nimport Produkty from './Produkty';\nimport Platnosci from './Platnosci';\n\nfunction App() {\n  // Stan dla pełnej listy produktów pobranej z serwera\n  const [products, setProducts] = useState([]);\n  // Stan dla produktów w koszyku\n  const [cartItems, setCartItems] = useState([]);\n  // Stan dla błędów ładowania produktów\n  const [loadingError, setLoadingError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true); // Stan ładowania produktów\n\n  // Pobieranie produktów przy starcie aplikacji\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setIsLoading(true); // Rozpocznij ładowanie\n      setLoadingError(null); // Zresetuj błąd\n      try {\n        const response = await fetch('/api/products');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setProducts(data);\n      } catch (error) {\n        console.error(\"Błąd podczas pobierania produktów:\", error);\n        setLoadingError(\"Nie udało się załadować produktów. Czy serwer backendowy działa?\");\n        setProducts([]); // Wyczyść produkty w razie błędu\n      } finally {\n        setIsLoading(false); // Zakończ ładowanie\n      }\n    };\n\n    fetchProducts();\n  }, []); // Pusta tablica zależności - uruchom tylko raz\n\n  // Funkcja do dodawania produktu do koszyka\n  // useCallback zapobiega tworzeniu nowej funkcji przy każdym renderowaniu App\n  const handleAddToCart = useCallback((productToAdd) => {\n    // Sprawdź czy produkt już jest w koszyku\n    setCartItems(prevItems => {\n      const isItemInCart = prevItems.find(item => item.id === productToAdd.id);\n      if (isItemInCart) {\n        // Na razie nic nie robimy jeśli już jest - można by zwiększać ilość\n        return prevItems;\n      } else {\n        // Dodaj nowy produkt do koszyka\n        return [...prevItems, { ...productToAdd }]; // Dodajemy kopię obiektu produktu\n      }\n    });\n  }, []); // Pusta tablica zależności, bo funkcja nie zależy od zmiennego stanu z zewnątrz App\n\n  // Funkcja do usuwania produktu z koszyka\n  const handleRemoveFromCart = useCallback((productIdToRemove) => {\n    setCartItems(prevItems =>\n      prevItems.filter(item => item.id !== productIdToRemove)\n    );\n  }, []); // Pusta tablica zależności\n\n  // Obliczanie sumy cen w koszyku\n  const totalPrice = cartItems.reduce((total, item) => total + item.cena, 0);\n\n  // Komponent do wyświetlania koszyka (prosta wersja)\n  const CartDisplay = () => (\n    <div className=\"cart-summary\">\n      <h2>Koszyk</h2>\n      {cartItems.length === 0 ? (\n        <p>Koszyk jest pusty.</p>\n      ) : (\n        <ul>\n          {cartItems.map(item => (\n            <li key={item.id}>\n              {item.nazwa} - {item.cena.toFixed(2)} PLN\n              <button onClick={() => handleRemoveFromCart(item.id)} style={{marginLeft: '10px'}}>Usuń</button>\n            </li>\n          ))}\n        </ul>\n      )}\n      <h3>Suma: {totalPrice.toFixed(2)} PLN</h3>\n    </div>\n  );\n\n\n  return (\n    <div className=\"App\">\n      <h1>Mój Sklep</h1>\n\n      {/* Wyświetlanie produktów */}\n      {isLoading && <div>Ładowanie produktów...</div>}\n      {loadingError && <div style={{ color: 'red' }}>Błąd: {loadingError}</div>}\n      {!isLoading && !loadingError && (\n        <Produkty\n          products={products}\n          cartItems={cartItems} // Przekazujemy aktualny koszyk\n          onAddToCart={handleAddToCart} // Przekazujemy funkcję dodawania\n          onRemoveFromCart={handleRemoveFromCart} // Przekazujemy funkcję usuwania\n        />\n      )}\n\n      <hr />\n\n      {/* Wyświetlanie koszyka */}\n      <CartDisplay />\n\n      <hr />\n\n      {/* Wyświetlanie płatności - tylko jeśli coś jest w koszyku */}\n      {cartItems.length > 0 && (\n          <Platnosci\n            totalPrice={totalPrice} // Przekazujemy obliczoną sumę\n          />\n      )}\n\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}